(this["webpackJsonpreact-sdk-demo"]=this["webpackJsonpreact-sdk-demo"]||[]).push([[0],{198:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t),n.d(t,"MitoInstance",(function(){return ye}));var c,r=n(0),o=n.n(r),i=n(40),a=n.n(i),s=(n(198),n(35)),d=n(284),l=n(94),u=n(56),j=n(21),h=n(41),b=n(286),p=n(42),f=n(20),x=n.n(f),O=n(64),g=n(189),m=n(285),v=n(287),k=n(11);!function(e){e.Xhr="Xhr",e.Fetch="Fetch"}(c||(c={}));var y=function(e,t,n){200===e?g.b.success("".concat(n,"\u8bf7\u6c42\u6210\u529f\uff1a").concat(JSON.parse(t).data)):g.b.error("".concat(n,"\u8bf7\u6c42\u5931\u8d25\uff1a").concat(JSON.parse(t).data))};function w(){var e=Object(s.g)(),t=Object(r.useState)(!1),n=Object(j.a)(t,2),o=n[0],i=n[1],a=function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){t("this is a reject message in Promise")})),e.next=3,t;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(o)throw new Error("is Render error");return Object(k.jsx)(m.a,{children:Object(k.jsxs)(l.a,{gutter:[10,10],children:[Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){var e=new XMLHttpRequest;e.open("get","/normal"),e.setRequestHeader("content-type","application/json"),e.send(),e.onreadystatechange=function(){4===e.readyState&&y(e.status,e.responseText,c.Xhr)}},children:"\u89e6\u53d1\u6b63\u5e38Xhr"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){var e=new XMLHttpRequest;e.open("get","/abnormal"),e.setRequestHeader("content-type","application/json"),e.send(),e.onreadystatechange=function(){4===e.readyState&&y(e.status,e.responseText,c.Xhr)}},children:"\u89e6\u53d1\u5f02\u5e38Xhr"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){fetch("/normal",{method:"GET"}).then((function(e){e.text().then((function(t){y(e.status,t,c.Fetch)}))}),(function(e){console.log("err",e)}))},children:"\u89e6\u53d1\u6b63\u5e38Fetch"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){fetch("/abnormal",{method:"GET"}).then((function(e){e.text().then((function(t){y(e.status,t,c.Fetch)}))}),(function(e){console.log("err",e)}))},children:"\u89e6\u53d1\u5f02\u5e38Fetch"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:a,children:"\u89e6\u53d1Promise\u9519\u8bef"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){({}).noObj.noField="no field"},children:"\u89e6\u53d1\u4ee3\u7801\u9519\u8bef"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){},children:"\u624b\u52a8\u4e0a\u62a5MITO.log"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){i(!0)},children:"\u89e6\u53d1render\u9519\u8bef"})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(v.a,{onClick:function(){e.push("/page-two")},children:"\u8def\u7531\u8df3\u8f6c"})})]})})}var C,R=n(190),E=n(289),S=n(147),N=p.a.span(C||(C=Object(h.a)(["\n  font-size: 26px;\n  display: flex;\n  justify-content: flex-start;\n"])));function M(e){var t=Object(S.useSpring)({from:{number:0},number:e.count,delay:200,config:S.config.molasses}).number;return Object(k.jsx)(S.animated.div,{children:t.to((function(e){return e.toFixed(1)}))})}function T(){var e=function(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),n=t[0],c=t[1];return{count:n,add:function(){c(n+1)},sub:function(){c(n-1)}}}(),t=e.count,n=e.add,c=e.sub;return Object(k.jsx)(m.a,{style:{marginBottom:"10px"},children:Object(k.jsxs)(l.a,{gutter:[0,10],children:[Object(k.jsx)(u.a,{span:24,children:Object(k.jsxs)(N,{children:[Object(k.jsx)("div",{children:"Count: "}),Object(k.jsx)(M,{count:t})]})}),Object(k.jsx)(v.a,{style:{marginRight:"10px"},onClick:n,icon:Object(k.jsx)(R.a,{}),children:"\u52a0"}),Object(k.jsx)(v.a,{onClick:c,icon:Object(k.jsx)(E.a,{}),children:"\u51cf"})]})})}var F=n(130),H=n(288);var z,X,q=n(105),I=n(135),W=n(133),A=n.n(W),G=n(70),J=Object(G.atomWithReset)({graph:null,count:0,nodes:[{id:"node1",x:40,y:40,width:80,height:40,label:"attrs label \u4f1a\u8986\u76d6\u6389",shape:"rect",attrs:{body:{fill:"#2ECC71",stroke:"#000",strokeDasharray:"10,2"},label:{text:"a12312a",fill:"#333",fontSize:13}}},{id:"node2",x:160,y:180,width:80,height:40,label:"\u6d4b\u8bd52",shape:"ellipse"}]}),B=n(186);!function(e){e.NodeClick="node:click",e.NodeRemoved="node:removed",e.NodeContextMenu="node:contextmenu",e.NodeMouseEnter="node:mouseenter",e.NodeMouseLeave="node:mouseleave"}(z||(z={})),function(e){e.EdgeClick="edge:click"}(X||(X={}));var L,P={background:{color:"rgb(242,243,244)"},grid:{size:6,visible:!0}};p.a.div(L||(L=Object(h.a)(["\n  width: 100px;\n  height: 50px;\n  border-radius: 5px;\n  text-align: center;\n  line-height: 50px;\n  border: 2px solid deepskyblue;\n  border-radius: 4px;\n  background-color: white;\n"])));var D,U,V,K={nodes:[{id:"node1",x:40,y:40,width:100,height:50,data:{name:"\u8282\u70b9\u4e00"}},{id:"node2",x:160,y:180,width:100,height:50,data:{name:"\u8282\u70b9\u4e8c"}}],edges:[{source:"node1",target:"node2",attrs:{line:{stroke:"deepskyblue"}},shape:"edge"}]};var Q=p.a.div(D||(D=Object(h.a)(["\n  flex: 0 0 150px;\n  height: 100%;\n"]))),Y=p.a.div(U||(U=Object(h.a)(["\n  display: flex;\n  padding: 16px;\n  flex: 0 0 150px;\n  flex-direction: column;\n  justify-content: flex-start;\n  background-color: white;\n  height: 100%;\n  align-items: center;\n"]))),Z=p.a.div(V||(V=Object(h.a)(["\n  border: 2px solid deepskyblue;\n  border-radius: 4px;\n  width: 100px;\n  height: 50px;\n  cursor: move;\n"]))),$=I.a.Dnd;function _(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(G.useAtomValue)(J).graph,i=Object(r.useCallback)((function(e){var t=null===o||void 0===o?void 0:o.createNode({width:100,height:50,id:"node3",attrs:{label:{text:"Rect",fill:"#6a6c8a"},body:{stroke:"deepskyblue",strokeWidth:2}},ports:{groups:{group1:{attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}}},items:[{id:"port1",group:"group1"},{id:"port2",group:"group1"},{id:"port3",group:"group1"}]}});t&&(null===n||void 0===n||n.start(t,e.nativeEvent))}),[n,o]);Object(r.useEffect)((function(){if(o){var e=new $({target:o,scaled:!1,animation:!0,validateNode:function(e,t){return"html"!==e.shape||new Promise((function(e){setTimeout((function(){e(!0)}),3e3)}))}});c(e)}}),[o]);return Object(k.jsx)(Q,{children:Object(k.jsxs)(Y,{children:[Object(k.jsx)(Z,{onMouseDown:i}),Object(k.jsx)(v.a,{style:{marginTop:"20px"},onClick:function(){console.log("graph data"),A.a.info(null===o||void 0===o?void 0:o.toJSON())},children:"\u6253\u5370\u6570\u636e"})]})})}n.p;var ee,te,ne=p.a.div(ee||(ee=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n"]))),ce=p.a.div(te||(te=Object(h.a)(["\n  flex: 1 1 auto;\n  height: 100%;\n"])));function re(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null);(function(e){var t=e.containerRef,n=e.contentRef,c=(e.minimapBoxRef,Object(r.useRef)()),o=Object(G.useUpdateAtom)(J);return Object(r.useEffect)((function(){if(t.current&&n.current){c.current=new I.b(Object(q.a)(Object(q.a)({},P),{},{width:t.current.clientWidth,height:t.current.clientHeight,container:n.current,history:!0,snapline:{enabled:!0,sharp:!0},selecting:{enabled:!0,className:"node-selecting",showNodeSelectionBox:!0}})),o((function(e){return Object(q.a)(Object(q.a)({},e),{},{graph:c.current})}));var e=Object(B.debounce)((function(){var e,n,r;null===(e=c.current)||void 0===e||e.resizeGraph(null===(n=t.current)||void 0===n?void 0:n.clientWidth,null===(r=t.current)||void 0===r?void 0:r.clientHeight)}),300);return window.addEventListener("resize",e),function(){var t;A.a.info("x6 graph destroied"),window.removeEventListener("resize",e),null===(t=c.current)||void 0===t||t.dispose()}}}),[t,n,o]),{graphRef:c}})({containerRef:e,contentRef:t}).graphRef;return function(){var e=Object(G.useAtomValue)(J).graph;Object(r.useEffect)((function(){e&&e.fromJSON(K)}),[e])}(),Object(k.jsxs)(ne,{children:[Object(k.jsx)(_,{}),Object(k.jsx)(ce,{ref:e,children:Object(k.jsx)("div",{ref:t})})]})}var oe,ie=[{path:"/page-one",component:function(e){var t=Object(k.jsx)(m.a,{children:Object(k.jsxs)(l.a,{gutter:[20,20],children:[Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(H.a,{message:"Oops\uff0c\u89e6\u53d1\u4e86render error",type:"error"})}),Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(v.a,{type:"primary",onClick:function(){return location.reload()},children:"\u70b9\u51fb\u5237\u65b0"})})]})});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(T,{}),Object(k.jsx)(F.a,{onError:function(e,t){console.log("triggered is render error")},fallback:t,children:Object(k.jsx)(w,{})})]})},meta:{title:"\u793a\u4f8b\u9875\u9762\u4e00"}},{path:"/page-two",component:function(){var e=Object(s.g)();return Object(k.jsxs)(m.a,{children:[Object(k.jsx)("h1",{children:"\u8fd9\u662f\u793a\u4f8b\u9875\u9762\u4e8c"}),Object(k.jsx)(v.a,{onClick:function(){return e.push("/page-one")},children:"\u8df3\u8f6c\u5b9e\u4f8b\u9875\u9762\u4e00"})]})},meta:{title:"\u793a\u4f8b\u9875\u9762\u4e8c"}},{path:"/page-topology",component:function(){return Object(k.jsx)(re,{})},meta:{title:"topology"}}],ae=d.a.Sider,se=p.a.div(oe||(oe=Object(h.a)(["\n  font-size: 22px;\n  width: 100%;\n  height: 64px;\n  background-color: #1890ff;\n  color: white;\n  text-align: center;\n  line-height: 64px;\n"])));function de(){var e=Object(s.g)(),t=e.location,n=e.push,c=Object(r.useState)(""),o=Object(j.a)(c,2),i=o[0],a=o[1];Object(r.useEffect)((function(){ie.some((function(e){return e.path===t.pathname}))&&a(t.pathname)}),[t]);return Object(k.jsxs)(ae,{style:{backgroundColor:"white"},children:[Object(k.jsx)(se,{children:"mitojs-react-demo"}),Object(k.jsx)(b.a,{onClick:function(e){n(e.key),a(e.key)},theme:"light",mode:"inline",selectedKeys:[i],children:ie.map((function(e){return Object(k.jsx)(b.a.Item,{children:e.meta.title},e.path)}))})]})}var le,ue,je=n(290),he=d.a.Header,be=Object(p.a)(je.a)(le||(le=Object(h.a)(["\n  font-size: 22px;\n  cursor: pointer;\n"]))),pe=Object(p.a)(he)(ue||(ue=Object(h.a)(["\n  background-color: white;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),fe=function(){return Object(k.jsx)(pe,{children:Object(k.jsx)(be,{onClick:function(){return window.open("https://github.com/mitojs/mitojs")}})})},xe=d.a.Content,Oe=function(){return Object(k.jsxs)(d.a,{style:{height:"100%"},children:[Object(k.jsx)(de,{}),Object(k.jsxs)(d.a,{children:[Object(k.jsx)(fe,{}),Object(k.jsx)(xe,{style:{padding:"10px"},children:Object(k.jsx)(l.a,{style:{padding:"10px 0"},gutter:[10,10],children:Object(k.jsx)(u.a,{span:24,children:Object(k.jsxs)(s.d,{children:[ie.map((function(e){return Object(k.jsx)(s.b,{path:e.path,component:e.component},e.path)})),Object(k.jsx)(s.a,{to:{pathname:ie[0].path}})]})})})})]})]})},ge=n(81);var me=function(){return Object(k.jsx)(ge.a,{children:Object(k.jsx)(s.d,{children:Object(k.jsx)(s.b,{path:"/",component:Oe})})})},ve=n(188),ke=n(282).worker,ye=Object(ve.a)({apikey:"abc-123",dsn:"/upload",maxBreadcrumbs:100,debug:!0,silentConsole:!0,enableTraceId:!0,includeHttpUrlTraceIdRegExp:/.*/,beforeAppAjaxSend:function(e,t){var n=e.method;e.url;"GET"===n&&t.setRequestHeader("get-id","mito-get")}});ke.start({serviceWorker:{url:"/react-sdk-demo/mockServiceWorker.js"}}),a.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(F.b,{MitoInstance:ye,children:Object(k.jsx)(me,{})})}),document.getElementById("root"))},282:function(e,t,n){"use strict";n.r(t),n.d(t,"worker",(function(){return a}));var c=n(9),r=n(156),o=n(57),i=[o.c.get("/normal",(function(e,t,n){return t(n.status(200),n.json({data:"Normal Get Request"}))})),o.c.get("/abnormal",(function(e,t,n){return t(n.status(500),n.json({data:"Abnormal Get Request"}))})),o.c.post("/upload",(function(e,t,n){return t(n.status(200),n.json({data:"ok"}))}))],a=r.a.apply(void 0,Object(c.a)(i))}},[[281,1,2]]]);
//# sourceMappingURL=main.9abd715b.chunk.js.map